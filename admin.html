<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AStar Live Cricket Score — Admin</title>
<style>
  :root{--green:#0ea44a;--dark:#0b6b3a;--cream:#f6efe6;--yellow:#ffdd00}
  body{margin:0;font-family:Inter,Arial;background:linear-gradient(180deg,#eaf6ea,#f6efe6);color:#05220b;display:flex;align-items:flex-start;justify-content:center;padding:18px 12px}
  .panel{background:white;padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(5,40,20,0.06);width:980px;max-width:100%}
  h2{margin:0 0 6px;color:var(--dark)}
  .two{display:flex;gap:12px;align-items:flex-start}
  .col{flex:1}
  input,textarea{width:100%;padding:8px;margin:8px 0;border-radius:8px;border:1px solid #e4e4e4;font-size:14px}
  button{background:var(--yellow);border:none;padding:10px 12px;border-radius:8px;font-weight:800;cursor:pointer}
  .hint{font-size:13px;color:#4b6b54}
  .small{font-size:13px;color:#6b8b70}
  .preview{background:#fff;border-radius:8px;padding:12px;border:1px solid #eef6ef}
  .row{display:flex;gap:8px}
  @media(max-width:980px){ .two{flex-direction:column} }
</style>
</head>
<body>
  <div class="panel">
    <h2>AStar Live Cricket Score — Admin</h2>

    <div id="loginBox">
      <div class="hint">Enter admin password to unlock the editor.</div>
      <input id="password" type="password" placeholder="Admin password">
      <button id="loginBtn">Login</button>
      <div id="loginMsg" class="small" style="color:#8b1a1a"></div>
    </div>

    <div id="editor" style="display:none; margin-top:12px;">
      <div class="hint">Update the match information. Fields left blank will not overwrite existing values.</div>

      <div class="two" style="margin-top:12px">
        <div class="col">
          <input id="match_title" placeholder="Match title (e.g. AStar Local Final)">

          <div class="row">
            <input id="team1_name" placeholder="Team 1 name">
            <input id="team2_name" placeholder="Team 2 name">
          </div>

          <div class="row">
            <input id="runs" placeholder="Current runs (batting team)">
            <input id="wickets" placeholder="Wickets">
          </div>

          <div class="row">
            <input id="overs" placeholder="Overs e.g. 7.3">
            <input id="overs_total" placeholder="Total overs e.g. 20">
          </div>

          <div class="row">
            <input id="striker" placeholder="Striker (e.g. A Khan 34(20))">
            <input id="non_striker" placeholder="Non-striker (optional)">
          </div>

          <div class="row">
            <input id="bowler" placeholder="Bowler (e.g. R Ali 3-0-12-1)">
            <input id="target" placeholder="Target (optional)">
          </div>

          <div class="row">
            <input id="balls_remaining" placeholder="Balls remaining (optional)">
            <input id="team1_score" placeholder="Team1 display (optional e.g. 145/4)">
          </div>

          <textarea id="notes" rows="3" placeholder="Short commentary / notes (optional)"></textarea>

          <div style="display:flex;gap:10px;align-items:center;margin-top:6px">
            <button id="updateBtn">Update Live Score</button>
            <div id="updateMsg" class="small"></div>
          </div>
        </div>

        <!-- Live Preview -->
        <div class="col" style="max-width:380px">
          <div class="small">Live Preview</div>
          <div class="preview" id="previewArea">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
              <div style="background:var(--green);color:#fff;padding:8px;border-radius:6px;font-weight:800">AStar</div>
              <div>
                <div id="pv_title" style="font-weight:800">Match Title</div>
                <div style="color:#6b8b70;font-size:13px" id="pv_sub">Local Match</div>
              </div>
            </div>
            <div style="display:flex;gap:8px">
              <div style="flex:1">
                <div id="pv_team1" style="font-weight:800">Team 1</div>
                <div id="pv_team1score" style="font-size:22px;font-weight:900;color:var(--yellow)">--</div>
                <div id="pv_bats" style="margin-top:6px;color:#4b6b54">Striker: --</div>
              </div>
              <div style="flex:1">
                <div id="pv_team2" style="font-weight:800">Team 2</div>
                <div id="pv_team2score" style="font-size:22px;font-weight:900;color:var(--yellow)">--</div>
                <div id="pv_bowl" style="margin-top:6px;color:#4b6b54">Bowler: --</div>
              </div>
            </div>

            <div style="display:flex;justify-content:space-between;margin-top:10px">
              <div style="color:#4b6b54" id="pv_overs">Overs: --</div>
              <div style="color:#4b6b54">CRR: <span id="pv_crr">--</span></div>
            </div>

            <div id="pv_notes" style="margin-top:8px;color:#294b34">Notes: —</div>
          </div>

        </div>
      </div>
    </div>
  </div>

<script>
const BACKEND = "https://livecricketscore-backend.onrender.com";
const ADMIN_PASSWORD = "livecricadmin";

document.getElementById("loginBtn").onclick = async () => {
  const pwd = document.getElementById("password").value.trim();
  if (pwd === ADMIN_PASSWORD){
    sessionStorage.setItem("admin_pwd",pwd);
    loginBox.style.display="none";
    editor.style.display="block";
    loginMsg.innerText="";
  } else {
    loginMsg.innerText="Invalid password";
  }
};

document.getElementById("updateBtn").onclick = async () => {
  const pwd = sessionStorage.getItem("admin_pwd");
  updateMsg.innerText="Updating...";

  const payload = {
    password: pwd,
    match_title: match_title.value,
    team1_name: team1_name.value,
    team2_name: team2_name.value,
    runs: runs.value,
    wickets: wickets.value,
    overs: overs.value,
    overs_total: overs_total.value,
    striker: striker.value,
    non_striker: non_striker.value,
    bowler: bowler.value,
    target: target.value,
    balls_remaining: balls_remaining.value,
    notes: notes.value,
    team1_score: team1_score.value
  };

  const r = await fetch(BACKEND + "/admin/update", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  });

  updateMsg.innerText = r.ok ? "✅ Updated!" : "❌ Update failed";
};
</script>
</body>
</html>


